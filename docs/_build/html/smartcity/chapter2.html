

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6. Chapter 2: Send Email by IFTTT &mdash; Smarthon Documentation 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="7. Chapter 3: Direct Control micro:bit by App Inventor 2" href="chapter3.html" />
    <link rel="prev" title="5. Chapter 1: Upload Data to ThingSpeak" href="chapter1.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Smarthon Smart City IoT Starter Kit</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1_Introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="2_IOTbit.html">2. IoT:bit Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="3_getstart.html">3. Getting started: Add the extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="4_wificonnect.html">4. First step: Connect the micro:bit to the Wi-Fi</a></li>
<li class="toctree-l2"><a class="reference internal" href="chapter1.html">5. Chapter 1: Upload Data to ThingSpeak</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">6. Chapter 2: Send Email by IFTTT</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ifttt-configuration">6.1. IFTTT Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#coding-makecode">6.2. Coding (Makecode)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#result">6.3. Result</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="chapter3.html">7. Chapter 3: Direct Control micro:bit by App Inventor 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="chapter4.html">8. Chapter 4: Cloud Control micro:bit by IFTTT</a></li>
<li class="toctree-l2"><a class="reference internal" href="chapter5.html">9. Chapter 5: Object to Object communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="case01.html">10. Case 01: Automated Smart Playground Lamp</a></li>
<li class="toctree-l2"><a class="reference internal" href="case02.html">11. Case 02: Smart Car park Access Barrier</a></li>
<li class="toctree-l2"><a class="reference internal" href="case03.html">12. Case 03: Garbage disposal system</a></li>
<li class="toctree-l2"><a class="reference internal" href="case04.html">13. Case 04: Urban noise detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="case05.html">14. Case 05: Car speed monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="case06.html">15. IoT Case 06: Weather Station</a></li>
<li class="toctree-l2"><a class="reference internal" href="case07.html">16. IoT Case 07: Smart defense system</a></li>
<li class="toctree-l2"><a class="reference internal" href="case08.html">17. IoT Case 08: Automated Traffic Light</a></li>
<li class="toctree-l2"><a class="reference internal" href="case09.html">18. IoT Case 09: Smart House door control</a></li>
<li class="toctree-l2"><a class="reference internal" href="case10.html">19. IoT Case 10: Smart Street Light</a></li>
<li class="toctree-l2"><a class="reference internal" href="case11.html">20. IoT Case 11: Roof garden clothes rack</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../smarthouse/index.html">Smarthon Smart House Kit for micro:bit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../smartplant/index.html">Smarthon Plant Kit for micro:bit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sensors_and_actuators/index.html">Sensors and actuators</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Smarthon Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Smarthon Smart City IoT Starter Kit</a> &raquo;</li>
        
      <li><span class="section-number">6. </span>Chapter 2: Send Email by IFTTT</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/smartcity/chapter2.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="chapter-2-send-email-by-ifttt">
<h1><span class="section-number">6. </span>Chapter 2: Send Email by IFTTT<a class="headerlink" href="#chapter-2-send-email-by-ifttt" title="Permalink to this headline">¶</a></h1>
<p>IFTTT is the way to connect hundreds of the apps and devices, including Twitter, Dropbox, Email, Google Assistant, etc. By the basic programming logic “if this then that”, it connects IoT services through their API (application programming interface).<P> In IFTTT, you can make your own applet and link services together by “if this(trigger) then that(action)”. For example, if we select webhooks (micro:bit button A) as trigger, Email (send email to your mailbox) as action. When micro:bit button A is pressed, it triggers (webhooks) and implement the action (send email) in IFTTT.<BR><P>
<img alt="auto_fit" src="../_images/Ch2_des1.png" /><P>
In this chapter, you will learn using micro:bit to activate trigger (webhooks). After that, it can implement other services (e.g. email)<BR><P></p>
<div class="section" id="ifttt-configuration">
<h2><span class="section-number">6.1. </span>IFTTT Configuration<a class="headerlink" href="#ifttt-configuration" title="Permalink to this headline">¶</a></h2>
<HR>
<H3>Goal:</H3>
Create applet and get the API key<P><p><span id="subtitle" >Step 1</span><BR><P>
Go to <a class="reference external" href="http://www.ifttt.com">http://www.ifttt.com</a>, register an account and login to the platform<BR><P>
<img alt="auto_fit" src="../_images/Ch2_ifttt1.png" /><P>
<span id="subtitle" >Step 2</span><BR><P>
On the top right menu, click “Create” &gt; “Applets”<BR><P>
<img alt="auto_fit" src="../_images/Ch2_ifttt2.png" /><P>
<span id="subtitle" >Step 3</span><BR><P>
Select this -&gt; select webhooks -&gt; input Event Name (eg. Event Name: SendEmail)，then click “Create trigger” <BR><P>
<img alt="auto_fit" src="../_images/Ch2_ifttt3.png" /><P>
<span id="subtitle" >Step 4</span><BR><P>
Select “That” &gt; Email<BR><P>
<img alt="auto_fit" src="../_images/Ch2_ifttt4.png" /><P>
<span id="subtitle" >Step 5</span><BR><P>
Select “Send me an email” , Input email title and body, then click “Create action” <BR><P>
<img alt="auto_fit" src="../_images/Ch2_ifttt5.png" /><P>
<span id="subtitle" >Step 6</span><BR><P>
Open your web browser, open the top right menu, select “My services” &gt; “Webhooks” <BR><P>
<img alt="auto_fit" src="../_images/Ch2_ifttt6.png" /><P>
<span id="subtitle" >Step 7</span><BR><P>
Select “Documentation” ，Copy your Webhooks Key as follows:<BR><P>
<img alt="auto_fit" src="../_images/Ch2_ifttt7.png" /><P></p>
</div>
<div class="section" id="coding-makecode">
<h2><span class="section-number">6.2. </span>Coding (Makecode)<a class="headerlink" href="#coding-makecode" title="Permalink to this headline">¶</a></h2>
<HR><p><span id="subtitle" >Step 1</span><BR><P>
Before we do the IFTTT uploading part, we have already know how to connect to the WiFi on the first chapter. <BR><P>
<img alt="auto_fit" src="../_images/Ch2_p3.png" /><P></p>
<p><span id="subtitle" >Step 2</span><BR><P>
When need to send ITFFF request, if <code class="docutils literal notranslate"><span class="pre">WiFi</span> <span class="pre">connected</span></code>, send data to IFTTT.<BR>
Input the following data of the IFTTT Application to the <code class="docutils literal notranslate"><span class="pre">Send</span> <span class="pre">IFTTT</span> <span class="pre">key…</span></code> block
<BR><P></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">IFTTT</span> <span class="pre">API</span> <span class="pre">key</span></code>: XXXXXXXXXXXXXXXX.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">event_name</span></code>: event name to trigger in Webhooks (eg. SendEmail)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">1-3</span></code>: if user want to add the value inside the email, click the add button and input value1, value2, value3<P></p></li>
</ul>
<p><img alt="auto_fit" src="../_images/Ch2_p5.png" /><P></p>
<p><span id="subtitle" >Step 3</span><BR><P>
If you want to show the IFTTT upload status, you can use the “on IFTTT Uploaded” handler to check the variable. You may use the OLED to display the status and error code.<BR><P></p>
<ul class="simple">
<li><p>Go to OLED Tab</p></li>
<li><p>Snap <code class="docutils literal notranslate"><span class="pre">initialize</span> <span class="pre">OLED</span> <span class="pre">with</span> <span class="pre">width…height..</span></code> to <code class="docutils literal notranslate"><span class="pre">on</span> <span class="pre">start</span></code></p></li>
<li><p>Snap the <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">string</span></code> inside the <code class="docutils literal notranslate"><span class="pre">On</span> <span class="pre">IFTTT</span> <span class="pre">Uploaded</span></code></p></li>
<li><p>Draw the variable from <code class="docutils literal notranslate"><span class="pre">On</span> <span class="pre">IFTTT</span> <span class="pre">Uploaded</span></code> to the <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">string</span></code> block placeholder<P></p></li>
</ul>
<p><img alt="auto_fit" src="../_images/Ch2_p6.png" /><P></p>
<p><span id="subtitle">Full Solution<BR><P>
MakeCode: <a class="reference external" href="https://makecode.microbit.org/#pub:_i1PgamYHVWX1">https://makecode.microbit.org/#pub:_i1PgamYHVWX1</a><BR><P>
You could also download the program from the following website:<BR></p>
<iframe src="https://makecode.microbit.org/#pub:_i1PgamYHVWX1" width="100%" height="500" frameborder="0"></iframe></div>
<div class="section" id="result">
<h2><span class="section-number">6.3. </span>Result<a class="headerlink" href="#result" title="Permalink to this headline">¶</a></h2>
<HR><p>After micro:bit is connected to WiFi and click button A, it will upload data to IFTTT.<BR><P>
If the upload is success, it will show <code class="docutils literal notranslate"><span class="pre">OK</span></code> with error code <code class="docutils literal notranslate"><span class="pre">0</span></code><P></p>
<p><img alt="auto_fit" src="../_images/Ch2_result1.png" /><P></p>
<p>If the upload is fail (such input wrong API key in this case), it will show <code class="docutils literal notranslate"><span class="pre">FAIL</span></code> with <code class="docutils literal notranslate"><span class="pre">error</span> <span class="pre">code</span></code>.<BR>
For the error 401, the user inputted the wrong API Key. For the error code -28674, there is no internet connection.<P></p>
<p><img alt="auto_fit" src="../_images/Ch2_result1_1.png" /><P></p>
<p>When success, email will be sent to your mailbox by IFTTT.<BR><P>
<img alt="auto_fit" src="../_images/Ch2_result2.png" /><P></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="chapter3.html" class="btn btn-neutral float-right" title="7. Chapter 3: Direct Control micro:bit by App Inventor 2" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="chapter1.html" class="btn btn-neutral float-left" title="5. Chapter 1: Upload Data to ThingSpeak" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Smarthon Limited

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>