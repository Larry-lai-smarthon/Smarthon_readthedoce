

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>11. Case 02: Smart Car park Access Barrier &mdash; Smarthon Documentation 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="12. Case 03: Garbage disposal system" href="case03.html" />
    <link rel="prev" title="10. Case 01: Automated Smart Playground Lamp" href="case01.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Smarthon Smart City IoT Starter Kit</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1_Introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="2_IOTbit.html">2. IoT:bit Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="3_getstart.html">3. Getting started: Add the extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="4_wificonnect.html">4. First step: Connect the micro:bit to the Wi-Fi</a></li>
<li class="toctree-l2"><a class="reference internal" href="chapter1.html">5. Chapter 1: Upload Data to ThingSpeak</a></li>
<li class="toctree-l2"><a class="reference internal" href="chapter2.html">6. Chapter 2: Send Email by IFTTT</a></li>
<li class="toctree-l2"><a class="reference internal" href="chapter3.html">7. Chapter 3: Direct Control micro:bit by App Inventor 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="chapter4.html">8. Chapter 4: Cloud Control micro:bit by IFTTT</a></li>
<li class="toctree-l2"><a class="reference internal" href="chapter5.html">9. Chapter 5: Object to Object communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="case01.html">10. Case 01: Automated Smart Playground Lamp</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">11. Case 02: Smart Car park Access Barrier</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#goal">11.1. Goal</a></li>
<li class="toctree-l3"><a class="reference internal" href="#background">11.2. Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="#part-list">11.3. Part List</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assembly-step">11.4. Assembly step</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hardware-connect">11.5. Hardware connect</a></li>
<li class="toctree-l3"><a class="reference internal" href="#programming-makecode">11.6. Programming (MakeCode)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#result">11.7. Result</a></li>
<li class="toctree-l3"><a class="reference internal" href="#think">11.8. Think</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="case03.html">12. Case 03: Garbage disposal system</a></li>
<li class="toctree-l2"><a class="reference internal" href="case04.html">13. Case 04: Urban noise detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="case05.html">14. Case 05: Car speed monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="case06.html">15. IoT Case 06: Weather Station</a></li>
<li class="toctree-l2"><a class="reference internal" href="case07.html">16. IoT Case 07: Smart defense system</a></li>
<li class="toctree-l2"><a class="reference internal" href="case08.html">17. IoT Case 08: Automated Traffic Light</a></li>
<li class="toctree-l2"><a class="reference internal" href="case09.html">18. IoT Case 09: Smart House door control</a></li>
<li class="toctree-l2"><a class="reference internal" href="case10.html">19. IoT Case 10: Smart Street Light</a></li>
<li class="toctree-l2"><a class="reference internal" href="case11.html">20. IoT Case 11: Roof garden clothes rack</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../smarthouse/index.html">Smarthon Smart House Kit for micro:bit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../smartplant/index.html">Smarthon Plant Kit for micro:bit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sensors_and_actuators/index.html">Sensors and actuators</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Smarthon Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Smarthon Smart City IoT Starter Kit</a> &raquo;</li>
        
      <li><span class="section-number">11. </span>Case 02: Smart Car park Access Barrier</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/smartcity/case02.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="case-02-smart-car-park-access-barrier">
<h1><span class="section-number">11. </span>Case 02: Smart Car park Access Barrier<a class="headerlink" href="#case-02-smart-car-park-access-barrier" title="Permalink to this headline">¶</a></h1>
<p>Level: <img alt="level" src="../_images/level22.png" />
<img alt="auto_fit" src="../_images/case-02.png" /><P></p>
<div class="section" id="goal">
<h2><span class="section-number">11.1. </span>Goal<a class="headerlink" href="#goal" title="Permalink to this headline">¶</a></h2>
<HR><p>Make a smart car park gate which opens automatically if there are vacancies in the car park and there are cars coming in.<BR><P></p>
</div>
<div class="section" id="background">
<h2><span class="section-number">11.2. </span>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h2>
<HR><p><span id="subtitle">What is smart car park access barrier?</span><P>
Smart Car park Access Barrier is used to allow people to live conveniently. It can reduce manpower and time in controlling the gate and manage information (e.g. car park vacancies). It will be opened automatically if there are vacancies in the car park and there are cars coming in.<BR><P></p>
<p><span id="subtitle">Car park gate operation</span><P>
The car park gate open and close operation is controlled by 180ᵒ servo. It will be opened if there are vacancies in the car park (i.e. detected by light sensor) and cars near the car park gate (i.e. detected by distance sensor). Otherwise, the gate will be closed.<BR><P>
When there are no vacancies (detected by light sensor), then the gate will keep closed.<BR><P>
<img alt="pic_70" src="../_images/Concept-diagram-Case2.png" /><P></p>
</div>
<div class="section" id="part-list">
<h2><span class="section-number">11.3. </span>Part List<a class="headerlink" href="#part-list" title="Permalink to this headline">¶</a></h2>
<HR><p><img alt="auto_fit" src="../_images/Case2_parts.png" /><P></p>
</div>
<div class="section" id="assembly-step">
<h2><span class="section-number">11.4. </span>Assembly step<a class="headerlink" href="#assembly-step" title="Permalink to this headline">¶</a></h2>
<HR><p><span id="subtitle">Step 1</span><BR><P>
Attach the distance sensor to B1 model with M4 * 10mm screws and nuts. <BR><P>
<img alt="auto_fit" src="../_images/Case2_ass1.png" /><P>
<span id="subtitle">Step 2</span><BR><P>
Attach the servo to B1 model with M2 * 10mm screws and nuts<BR><P>
<img alt="auto_fit" src="../_images/Case2_ass2.png" /><P>
<span id="subtitle">Step 3</span><BR><P>
Attach the B2 model to the servo with servo M2 * 7.5mm sharp screw. Put B3 model onto B1 model.<BR><P>
<img alt="auto_fit" src="../_images/Case2_ass3.png" /><P>
<span id="subtitle">Step 4</span><BR><P>
Assembly completed! <BR><P>
<img alt="pic_60" src="../_images/Case2_ass4.png" /><P></p>
</div>
<div class="section" id="hardware-connect">
<h2><span class="section-number">11.5. </span>Hardware connect<a class="headerlink" href="#hardware-connect" title="Permalink to this headline">¶</a></h2>
<HR><p>Connect the Distance Sensor to P14 (trig)/ P15 (echo) port of IoT:bit<BR><P>
Connect Light Sensor to P0 port of IoT:bit<BR><P>
Connect 180° Servo to P2 port of IoT:bit<BR><P>
<img alt="auto_fit" src="../_images/Case2_hardware.png" /><P></p>
</div>
<div class="section" id="programming-makecode">
<h2><span class="section-number">11.6. </span>Programming (MakeCode)<a class="headerlink" href="#programming-makecode" title="Permalink to this headline">¶</a></h2>
<HR><p><span id="subtitle">Step 1</span><BR><P>
Initialize variables and turn servo to start position at the beginning.<BR><P></p>
<ul class="simple">
<li><p>Inside <code class="docutils literal notranslate"><span class="pre">on</span> <span class="pre">start</span></code>, snap <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">variable</span> <span class="pre">distance</span> <span class="pre">to</span> <span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">light</span> <span class="pre">to</span> <span class="pre">0</span></code> from <code class="docutils literal notranslate"><span class="pre">variables</span></code>.</p></li>
<li><p>Snap <code class="docutils literal notranslate"><span class="pre">Turn</span> <span class="pre">Servo</span> <span class="pre">to</span> <span class="pre">0</span> <span class="pre">degree</span> <span class="pre">at</span> <span class="pre">P2</span></code>.
<img alt="auto_fit" src="../_images/Case2_p1.png" /><P></p></li>
</ul>
<p><span id="subtitle">Step 2</span><BR><P>
It will continuously check the distance from distance sensor and light value from light sensor.<BR><P></p>
<ul class="simple">
<li><p>Drag <code class="docutils literal notranslate"><span class="pre">get</span> <span class="pre">distance</span> <span class="pre">to</span> <span class="pre">get</span> <span class="pre">distance</span> <span class="pre">unit</span> <span class="pre">cm</span> <span class="pre">trig</span> <span class="pre">P14</span> <span class="pre">echo</span> <span class="pre">P15</span></code>, store the value to variable <code class="docutils literal notranslate"><span class="pre">distance</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Get</span> <span class="pre">light</span> <span class="pre">value</span> <span class="pre">(percentage)</span> <span class="pre">at</span> <span class="pre">Pin</span> <span class="pre">P0</span></code>, store the value to variable <code class="docutils literal notranslate"><span class="pre">light</span></code>
<img alt="auto_fit" src="../_images/Case2_p2.png" /><P></p></li>
</ul>
<p><span id="subtitle">Step 3</span><BR><P>
When the car is in front of the distance sensor of the gate and there are vacancies in car park (light sensor value is high).<BR><P></p>
<ul class="simple">
<li><p>Snap <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">statement</span></code> into forever, set if variable <code class="docutils literal notranslate"><span class="pre">distance</span></code> ≤ 5</p></li>
<li><p>Snap another <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">statement</span></code> set variable <code class="docutils literal notranslate"><span class="pre">light</span></code> value &gt;20
<img alt="auto_fit" src="../_images/Case2_p3.png" /><P></p></li>
</ul>
<p><span id="subtitle">Step 4</span><BR><P>
If the statement is true, then the gate will be opened for 5 seconds and then closed.<BR><P></p>
<ul class="simple">
<li><p>Snap <code class="docutils literal notranslate"><span class="pre">Turn</span> <span class="pre">Servo</span> <span class="pre">to</span> <span class="pre">90</span> <span class="pre">degree</span> <span class="pre">at</span> <span class="pre">P2</span></code> as the gate is opened.</p></li>
<li><p>Snap <code class="docutils literal notranslate"><span class="pre">pause</span></code> to the loop to wait 5 seconds</p></li>
<li><p>Snap <code class="docutils literal notranslate"><span class="pre">Turn</span> <span class="pre">Servo</span> <span class="pre">to</span> <span class="pre">0</span> <span class="pre">degree</span> <span class="pre">at</span> <span class="pre">P2</span></code> as the gate is closed.
<img alt="auto_fit" src="../_images/Case2_p4.png" /><P></p></li>
</ul>
<p><span id="subtitle">Full Solution<BR><P>
MakeCode: <a class="reference external" href="https://makecode.microbit.org/#pub:_6xjh8hAhi81j">https://makecode.microbit.org/_6xjh8hAhi81j</a><BR><P>
You could also download the program from the following website:<BR></p>
<iframe src="https://makecode.microbit.org/#pub:_6xjh8hAhi81j" width="100%" height="500" frameborder="0"></iframe></div>
<div class="section" id="result">
<h2><span class="section-number">11.7. </span>Result<a class="headerlink" href="#result" title="Permalink to this headline">¶</a></h2>
<HR><p>The light sensor is used to check the vacancies in the car park while the distance sensor is used to detect if there are any cars coming near the car park gate<BR><P>
The car park gate is controlled by 180ᵒ servo. When there are vacancies in the car park and there are cars near the car park gate, the car park is available. The gate will be opened for 5 seconds and then closed to let the car entering the car park.<BR><P>
<img alt="auto_fit" src="../_images/Case2_result.gif" /><P></p>
</div>
<div class="section" id="think">
<h2><span class="section-number">11.8. </span>Think<a class="headerlink" href="#think" title="Permalink to this headline">¶</a></h2>
<HR><p>Q1. How can you show the light and distance value on OLED?<BR><P>
Q2. Can you show signals on micro:bit LED to let drivers know there are vacancies in the car park?<BR><P></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="case03.html" class="btn btn-neutral float-right" title="12. Case 03: Garbage disposal system" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="case01.html" class="btn btn-neutral float-left" title="10. Case 01: Automated Smart Playground Lamp" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Smarthon Limited

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>