

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>20. IoT Case 11: Roof garden clothes rack &mdash; Smarthon Documentation 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Smarthon Smart House Kit for micro:bit" href="../smarthouse/index.html" />
    <link rel="prev" title="19. IoT Case 10: Smart Street Light" href="case10.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Smarthon Smart City IoT Starter Kit</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1_Introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="2_IOTbit.html">2. IoT:bit Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="3_getstart.html">3. Getting started: Add the extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="4_wificonnect.html">4. First step: Connect the micro:bit to the Wi-Fi</a></li>
<li class="toctree-l2"><a class="reference internal" href="chapter1.html">5. Chapter 1: Upload Data to ThingSpeak</a></li>
<li class="toctree-l2"><a class="reference internal" href="chapter2.html">6. Chapter 2: Send Email by IFTTT</a></li>
<li class="toctree-l2"><a class="reference internal" href="chapter3.html">7. Chapter 3: Control micro:bit by App Inventor 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="chapter4.html">8. Chapter 4: Control your micro:bit by IFTTT Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="chapter5.html">9. Chapter 5: Object to Object communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="case01.html">10. Case 01: Automated Smart Playground Lamp</a></li>
<li class="toctree-l2"><a class="reference internal" href="case02.html">11. Case 02: Smart Car park Access Barrier</a></li>
<li class="toctree-l2"><a class="reference internal" href="case03.html">12. Case 03: Garbage disposal system</a></li>
<li class="toctree-l2"><a class="reference internal" href="case04.html">13. Case 04: Urban noise detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="case05.html">14. Case 05: Car speed monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="case06.html">15. IoT Case 06: Weather Station</a></li>
<li class="toctree-l2"><a class="reference internal" href="case07.html">16. IoT Case 07: Smart defense system</a></li>
<li class="toctree-l2"><a class="reference internal" href="case08.html">17. IoT Case 08: Automated Traffic Light</a></li>
<li class="toctree-l2"><a class="reference internal" href="case09.html">18. IoT Case 09: Smart House door control</a></li>
<li class="toctree-l2"><a class="reference internal" href="case10.html">19. IoT Case 10: Smart Street Light</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">20. IoT Case 11: Roof garden clothes rack</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#goal">20.1. Goal</a></li>
<li class="toctree-l3"><a class="reference internal" href="#background">20.2. Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="#part-list">20.3. Part List</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assembly-step">20.4. Assembly step</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hardware-connect">20.5. Hardware connect</a></li>
<li class="toctree-l3"><a class="reference internal" href="#programming-makecode">20.6. Programming (MakeCode)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#iot-ifttt">20.7. IoT (IFTTT)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#result">20.8. Result</a></li>
<li class="toctree-l3"><a class="reference internal" href="#think">20.9. Think</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../smarthouse/index.html">Smarthon Smart House Kit for micro:bit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../smartplant/index.html">Smarthon Plant Kit for micro:bit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sensors_and_actuators/index.html">Sensors and actuators</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Smarthon Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Smarthon Smart City IoT Starter Kit</a> &raquo;</li>
        
      <li><span class="section-number">20. </span>IoT Case 11: Roof garden clothes rack</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/smartcity/case11.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="iot-case-11-roof-garden-clothes-rack">
<h1><span class="section-number">20. </span>IoT Case 11: Roof garden clothes rack<a class="headerlink" href="#iot-case-11-roof-garden-clothes-rack" title="Permalink to this headline">¶</a></h1>
<p>Level: <img alt="level" src="../_images/level51.png" /></p>
<div class="section" id="goal">
<h2><span class="section-number">20.1. </span>Goal<a class="headerlink" href="#goal" title="Permalink to this headline">¶</a></h2>
<HR><p>Make a smart roof garden clothes rack, once raindrop is detected, the rack can be opened automatically.</p>
</div>
<div class="section" id="background">
<h2><span class="section-number">20.2. </span>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h2>
<HR><p>People no long need to rush up to the roof when raining as the clothes rack can be closed automatically even when house owner is not at home.
Smart roof garden operation
When raindrop sensor sensed that it is raining, it will send a signal to micro:bit and therefore the clothes rack will be opened. When there is no rain, the clothes rack will be closed.
Also, micro:bit can receive WAN commands from WAN (eg. IFTTT), the the micro:bit will get the command name. If the command name is “rain”, the servo will turn to 90ᵒ and the rack will be opened. If the command name is “clear”, servo will turn to 180ᵒ and the rack will be closed.</p>
</div>
<div class="section" id="part-list">
<h2><span class="section-number">20.3. </span>Part List<a class="headerlink" href="#part-list" title="Permalink to this headline">¶</a></h2>
<HR><table><tr><td>
Electronics:
<ul display='inline-block'>
<li>micro:bit X1</li>
<li>IoT:bit(with OLED) X1</li>
<li>3-pin module wire X1 </li>
&nbsp;&nbsp;1. 180ᵒ Servo X1<BR>
&nbsp;&nbsp;2. Raindrop Sensor X1<BR>
</ul>
</td></tr>
<tr>
<td>Model:
<ul>
<li>Smart Street Light Model H1-H7 X1</li>
<li>M4 Screw X4</li>
<li>M4 Nut X4</li>
<li>M2 Screw x 10mm X2</li>
<li>M2 Nut X2</li>
<li>Servo M2 sharp screw X1</li>
</ul>
</td></tr>
<tr><td>Equipment:
<ul><li>ScrewDriver X1</li></ul></td></tr></table><p><img alt="auto_fit" src="../_images/Case11_parts.png" /><P></p>
</div>
<div class="section" id="assembly-step">
<h2><span class="section-number">20.4. </span>Assembly step<a class="headerlink" href="#assembly-step" title="Permalink to this headline">¶</a></h2>
<HR><p><span id="subtitle">Step 1</span><BR><P>
Attach the raindrop sensor to the model H2<BR><P>
<img alt="auto_fit" src="../_images/Case11_po1.png" /><P>
<span id="subtitle">Step 2</span><BR><P>
Screw the cloth rack (H5) onto the 180ᵒ servo using M2 screws<BR><P>
<img alt="auto_fit" src="../_images/Case11_po2.png" /><P>
<span id="subtitle">Step 3</span><BR><P>
Put together the models H4-H5 and H6-H7<BR><P>
<img alt="auto_fit" src="../_images/Case11_po3.png" /><P>
<span id="subtitle">Step 4</span><BR><P>
Attach the long stand (H3) to the model H1<BR><P>
<img alt="auto_fit" src="../_images/Case11_po4.png" /><P>
<span id="subtitle">Step 5</span><BR><P>
Put together all the cardboard parts.<BR><P>
<img alt="auto_fit" src="../_images/Case11_po5.png" /><P></p>
</div>
<div class="section" id="hardware-connect">
<h2><span class="section-number">20.5. </span>Hardware connect<a class="headerlink" href="#hardware-connect" title="Permalink to this headline">¶</a></h2>
<HR><p>Connect the Raindrop sensor to P0 port of IoT:bit<BR><P>
Connect the 180ᵒ Servo to P1 port of IoT:bit<BR><P></p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="center">Micro:bit P1</th>
<th align="center">Servo</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">S (yellow)</td>
<td align="center">S (orange)</td>
</tr>
<tr>
<td align="center">V (red)</td>
<td align="center">V (red)</td>
</tr>
<tr>
<td align="center">G (black)</td>
<td align="center">G (brown)</td>
</tr>
</tbody>
</table><p><img alt="auto_fit" src="../_images/Case11_hardware.png" /><P></p>
</div>
<div class="section" id="programming-makecode">
<h2><span class="section-number">20.6. </span>Programming (MakeCode)<a class="headerlink" href="#programming-makecode" title="Permalink to this headline">¶</a></h2>
<HR><p><span id="subtitle">Step 1</span><BR><P>
Drag on start block fro Basic. Drag Initialize IoT:bit at OLED from IoT:bit, set OLED height:64, width:128. Set WiFi to ssid “wifi_name” and pwd “WiFi_password”.<BR><P>
<img alt="auto_fit" src="../_images/Case11_p1.png" /><P>
<span id="subtitle">Step 2</span><BR><P>
Set raindrop to 0.<BR><P>
<img alt="auto_fit" src="../_images/Case11_p2.png" /><P>
<span id="subtitle">Step 3</span><BR><P>
Set Forcast_rain to false.<BR><P>
<img alt="auto_fit" src="../_images/Case11_p3.png" /><P>
<span id="subtitle">Step 4
span&gt;<BR><P>Turn servo to 180 degree at P1 from Smartcity. The rack is closed.<BR><P>
<img alt="auto_fit" src="../_images/Case11_p4.png" /><P>
<span id="subtitle">Step 5</span><BR><P>
Drag On WiFi connected and start WiFi remote control (WAN) from IoT:bit.<BR><P>
<img alt="auto_fit" src="../_images/Case11_p5.png" /><P>
<span id="subtitle">Step 6</span><BR><P>
Drag on WAN command received (WAN_Command) from IoT:bit.<BR><P>
<img alt="auto_fit" src="../_images/Case11_p6.png" /><P>
<span id="subtitle">Step 7</span><BR><P>
If WAN_Command = clear then, set Forcast_rain to false.<BR><P>
<img alt="auto_fit" src="../_images/Case11_p7.png" /><P>
<span id="subtitle">Step 8</span><BR><P>
Else (i.e. WAN_Command ≠ clear, set Forcast_rain to true).<BR><P>
<img alt="auto_fit" src="../_images/Case11_p8.png" /><P>
<span id="subtitle">Step 9</span><BR><P>
Drag forever block from Basic. Set raindrop to get raindrop value (percentage) at Pin P0 and show number raindrop from OLED.<BR><P>
<img alt="auto_fit" src="../_images/Case11_p9.png" /><P>
<span id="subtitle">Step 10</span><BR><P>
Snap if statement into forever. Set if raindrop &gt; 5 (raining) or Forcast_rain=true (it will rain) then.<BR><P>
Snap turn Servo to 90 degree at P1 from Smartcity. That’s say the rack can be opened.<BR><P>
<img alt="auto_fit" src="../_images/Case11_p10.png" /><P>
<span id="subtitle">Step 11</span><BR><P>
Else, turn servo to 180 degree at P1. That’s say the rack will be closed otherwise.<BR><P>
<img alt="auto_fit" src="../_images/Case11_p11.png" /><P>
<span id="subtitle">Step 12</span><BR><P>
Pause for 15000ms.<BR><P>
<img alt="auto_fit" src="../_images/Case11_p12.png" /><P></p>
<p><span id="subtitle">Full Solution<BR><P>
MakeCode: <a class="reference external" href="https://makecode.microbit.org/#pub:_UC24pMak66dT">https://makecode.microbit.org/_UC24pMak66dT</a><BR><P>
You could also download the program from the following website:<BR></p>
<iframe src="https://makecode.microbit.org/#pub:_UC24pMak66dT" width="100%" height="500" frameborder="0"></iframe></div>
<div class="section" id="iot-ifttt">
<h2><span class="section-number">20.7. </span>IoT (IFTTT)<a class="headerlink" href="#iot-ifttt" title="Permalink to this headline">¶</a></h2>
<HR><p><span id="remarks">For the setting of IFTTT, please refer to “Chapter 4: Control your micro:bit by IFTTT Services”</span><BR><P></p>
<p><span id="subtitle">Step 1</span><BR><P>
Create applet (If Weather Underground then Smarthon)<BR><P>
<img alt="auto_fit" src="../_images/Case11_iot1.png" /><P>
If it is at 06:00pm, send WAN control command: light_on to the micro:bit<BR><P>
<img alt="auto_fit" src="../_images/Case11_iot1.png" /><P></p>
</div>
<div class="section" id="result">
<h2><span class="section-number">20.8. </span>Result<a class="headerlink" href="#result" title="Permalink to this headline">¶</a></h2>
<HR><p>The micro:bit is controlled by IFTTT (trigger by weather open data). When the weather condition change to “rain”, the cloth rack will be opened. When the weather condition change to “clear”, the cloth rack will be closed.<BR><P>
<img alt="auto_fit" src="../_images/Case11_result.gif" /><P></p>
</div>
<div class="section" id="think">
<h2><span class="section-number">20.9. </span>Think<a class="headerlink" href="#think" title="Permalink to this headline">¶</a></h2>
<HR><p>Q1. How to notify the house owner the weather status (rain) by email through IFTTT?<BR><P></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../smarthouse/index.html" class="btn btn-neutral float-right" title="Smarthon Smart House Kit for micro:bit" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="case10.html" class="btn btn-neutral float-left" title="19. IoT Case 10: Smart Street Light" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Smarthon Limited

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>